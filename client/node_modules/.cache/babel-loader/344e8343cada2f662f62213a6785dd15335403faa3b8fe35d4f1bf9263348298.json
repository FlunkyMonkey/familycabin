{"ast":null,"code":"import React,{useState}from'react';import{Box,Button,TextField,Typography,Alert,InputAdornment,IconButton,Link as MuiLink}from'@mui/material';import{Link}from'react-router-dom';import{useMutation}from'@apollo/client';import{Visibility,VisibilityOff}from'@mui/icons-material';import{LOGIN}from'../graphql/mutations';import{useAuth}from'../context/AuthContext';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Login=()=>{const[formState,setFormState]=useState({username:'',password:''});const[showPassword,setShowPassword]=useState(false);const[error,setError]=useState('');const{login}=useAuth();const[loginUser,{loading}]=useMutation(LOGIN,{onCompleted:data=>{login(data.login.token,data.login.user);},onError:error=>{setError(error.message);}});const handleChange=event=>{const{name,value}=event.target;setFormState({...formState,[name]:value});};const handleSubmit=async event=>{event.preventDefault();setError('');try{await loginUser({variables:{...formState}});}catch(e){// Error is handled in onError callback\n}};const handleClickShowPassword=()=>{setShowPassword(!showPassword);};return/*#__PURE__*/_jsxs(Box,{component:\"form\",onSubmit:handleSubmit,noValidate:true,children:[/*#__PURE__*/_jsx(Typography,{component:\"h1\",variant:\"h5\",align:\"center\",gutterBottom:true,children:\"Log In\"}),error&&/*#__PURE__*/_jsx(Alert,{severity:\"error\",sx:{mb:2},children:error}),/*#__PURE__*/_jsx(TextField,{margin:\"normal\",required:true,fullWidth:true,id:\"username\",label:\"Username\",name:\"username\",autoComplete:\"username\",autoFocus:true,value:formState.username,onChange:handleChange,disabled:loading}),/*#__PURE__*/_jsx(TextField,{margin:\"normal\",required:true,fullWidth:true,name:\"password\",label:\"Password\",type:showPassword?'text':'password',id:\"password\",autoComplete:\"current-password\",value:formState.password,onChange:handleChange,disabled:loading,InputProps:{endAdornment:/*#__PURE__*/_jsx(InputAdornment,{position:\"end\",children:/*#__PURE__*/_jsx(IconButton,{\"aria-label\":\"toggle password visibility\",onClick:handleClickShowPassword,edge:\"end\",children:showPassword?/*#__PURE__*/_jsx(VisibilityOff,{}):/*#__PURE__*/_jsx(Visibility,{})})})}}),/*#__PURE__*/_jsx(Button,{type:\"submit\",fullWidth:true,variant:\"contained\",sx:{mt:3,mb:2,py:1.5},disabled:loading,children:loading?'Logging in...':'Log In'}),/*#__PURE__*/_jsx(Box,{sx:{textAlign:'center'},children:/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",children:[\"Don't have an account?\",' ',/*#__PURE__*/_jsx(MuiLink,{component:Link,to:\"/register\",variant:\"body2\",children:\"Register here\"})]})})]});};export default Login;","map":{"version":3,"names":["React","useState","Box","Button","TextField","Typography","Alert","InputAdornment","IconButton","Link","MuiLink","useMutation","Visibility","VisibilityOff","LOGIN","useAuth","jsx","_jsx","jsxs","_jsxs","Login","formState","setFormState","username","password","showPassword","setShowPassword","error","setError","login","loginUser","loading","onCompleted","data","token","user","onError","message","handleChange","event","name","value","target","handleSubmit","preventDefault","variables","e","handleClickShowPassword","component","onSubmit","noValidate","children","variant","align","gutterBottom","severity","sx","mb","margin","required","fullWidth","id","label","autoComplete","autoFocus","onChange","disabled","type","InputProps","endAdornment","position","onClick","edge","mt","py","textAlign","to"],"sources":["/Users/mikeb/familycabin/client/src/pages/Login.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { \n  Box, \n  Button, \n  TextField, \n  Typography, \n  Alert,\n  InputAdornment,\n  IconButton,\n  Link as MuiLink\n} from '@mui/material';\nimport { Link } from 'react-router-dom';\nimport { useMutation } from '@apollo/client';\nimport { Visibility, VisibilityOff } from '@mui/icons-material';\nimport { LOGIN } from '../graphql/mutations';\nimport { useAuth } from '../context/AuthContext';\n\nconst Login = () => {\n  const [formState, setFormState] = useState({\n    username: '',\n    password: '',\n  });\n  const [showPassword, setShowPassword] = useState(false);\n  const [error, setError] = useState('');\n  const { login } = useAuth();\n  \n  const [loginUser, { loading }] = useMutation(LOGIN, {\n    onCompleted: (data) => {\n      login(data.login.token, data.login.user);\n    },\n    onError: (error) => {\n      setError(error.message);\n    },\n  });\n  \n  const handleChange = (event) => {\n    const { name, value } = event.target;\n    setFormState({\n      ...formState,\n      [name]: value,\n    });\n  };\n  \n  const handleSubmit = async (event) => {\n    event.preventDefault();\n    setError('');\n    \n    try {\n      await loginUser({\n        variables: { ...formState },\n      });\n    } catch (e) {\n      // Error is handled in onError callback\n    }\n  };\n  \n  const handleClickShowPassword = () => {\n    setShowPassword(!showPassword);\n  };\n  \n  return (\n    <Box component=\"form\" onSubmit={handleSubmit} noValidate>\n      <Typography component=\"h1\" variant=\"h5\" align=\"center\" gutterBottom>\n        Log In\n      </Typography>\n      \n      {error && (\n        <Alert severity=\"error\" sx={{ mb: 2 }}>\n          {error}\n        </Alert>\n      )}\n      \n      <TextField\n        margin=\"normal\"\n        required\n        fullWidth\n        id=\"username\"\n        label=\"Username\"\n        name=\"username\"\n        autoComplete=\"username\"\n        autoFocus\n        value={formState.username}\n        onChange={handleChange}\n        disabled={loading}\n      />\n      \n      <TextField\n        margin=\"normal\"\n        required\n        fullWidth\n        name=\"password\"\n        label=\"Password\"\n        type={showPassword ? 'text' : 'password'}\n        id=\"password\"\n        autoComplete=\"current-password\"\n        value={formState.password}\n        onChange={handleChange}\n        disabled={loading}\n        InputProps={{\n          endAdornment: (\n            <InputAdornment position=\"end\">\n              <IconButton\n                aria-label=\"toggle password visibility\"\n                onClick={handleClickShowPassword}\n                edge=\"end\"\n              >\n                {showPassword ? <VisibilityOff /> : <Visibility />}\n              </IconButton>\n            </InputAdornment>\n          ),\n        }}\n      />\n      \n      <Button\n        type=\"submit\"\n        fullWidth\n        variant=\"contained\"\n        sx={{ mt: 3, mb: 2, py: 1.5 }}\n        disabled={loading}\n      >\n        {loading ? 'Logging in...' : 'Log In'}\n      </Button>\n      \n      <Box sx={{ textAlign: 'center' }}>\n        <Typography variant=\"body2\">\n          Don't have an account?{' '}\n          <MuiLink component={Link} to=\"/register\" variant=\"body2\">\n            Register here\n          </MuiLink>\n        </Typography>\n      </Box>\n    </Box>\n  );\n};\n\nexport default Login;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}