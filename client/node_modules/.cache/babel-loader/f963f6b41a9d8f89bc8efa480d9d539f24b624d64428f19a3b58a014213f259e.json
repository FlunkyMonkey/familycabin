{"ast":null,"code":"import React from'react';import{Menu,MenuItem,Typography,Box,Divider,Button,IconButton,ListItemIcon,ListItemText}from'@mui/material';import{useNavigate}from'react-router-dom';import DoneAllIcon from'@mui/icons-material/DoneAll';import NotificationsIcon from'@mui/icons-material/Notifications';import HomeIcon from'@mui/icons-material/Home';import PersonAddIcon from'@mui/icons-material/PersonAdd';import AnnouncementIcon from'@mui/icons-material/Announcement';import{useNotifications}from'../../context/NotificationContext';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const NotificationMenu=_ref=>{let{anchorEl,open,onClose}=_ref;const{notifications,markAsRead,markAllAsRead}=useNotifications();const navigate=useNavigate();const handleNotificationClick=notification=>{markAsRead(notification._id);// Navigate based on notification type\nif(notification.relatedTo){navigate(`/cabins/${notification.relatedTo}`);}onClose();};const handleMarkAllRead=()=>{markAllAsRead();onClose();};// Get icon based on notification type\nconst getNotificationIcon=type=>{switch(type){case'INVITE':return/*#__PURE__*/_jsx(PersonAddIcon,{fontSize:\"small\",color:\"primary\"});case'APPROVAL':return/*#__PURE__*/_jsx(HomeIcon,{fontSize:\"small\",color:\"success\"});case'SYSTEM':return/*#__PURE__*/_jsx(AnnouncementIcon,{fontSize:\"small\",color:\"info\"});default:return/*#__PURE__*/_jsx(NotificationsIcon,{fontSize:\"small\"});}};return/*#__PURE__*/_jsxs(Menu,{anchorEl:anchorEl,open:open,onClose:onClose,PaperProps:{elevation:3,sx:{maxHeight:400,width:360,overflow:'auto',mt:1.5,'& .MuiMenuItem-root':{px:2,py:1.5}}},transformOrigin:{horizontal:'right',vertical:'top'},anchorOrigin:{horizontal:'right',vertical:'bottom'},children:[/*#__PURE__*/_jsxs(Box,{sx:{px:2,py:1.5,display:'flex',justifyContent:'space-between',alignItems:'center'},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",children:\"Notifications\"}),/*#__PURE__*/_jsx(IconButton,{size:\"small\",onClick:handleMarkAllRead,title:\"Mark all as read\",children:/*#__PURE__*/_jsx(DoneAllIcon,{fontSize:\"small\"})})]}),/*#__PURE__*/_jsx(Divider,{}),notifications.length===0?/*#__PURE__*/_jsxs(Box,{sx:{p:2,textAlign:'center'},children:[/*#__PURE__*/_jsx(NotificationsIcon,{sx:{fontSize:40,color:'text.secondary',mb:1}}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"text.secondary\",children:\"No notifications yet\"})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[notifications.map(notification=>/*#__PURE__*/_jsxs(MenuItem,{onClick:()=>handleNotificationClick(notification),className:\"notification-item\",sx:{bgcolor:notification.read?'transparent':'action.hover',borderLeft:notification.read?'none':'4px solid',borderColor:'primary.main'},children:[/*#__PURE__*/_jsx(ListItemIcon,{children:getNotificationIcon(notification.type)}),/*#__PURE__*/_jsx(ListItemText,{primary:notification.message,secondary:new Date(notification.createdAt).toLocaleString(),primaryTypographyProps:{variant:'body2',fontWeight:notification.read?'normal':'bold'},secondaryTypographyProps:{variant:'caption'}})]},notification._id)),/*#__PURE__*/_jsx(Divider,{}),/*#__PURE__*/_jsx(Box,{sx:{p:1,display:'flex',justifyContent:'center'},children:/*#__PURE__*/_jsx(Button,{size:\"small\",onClick:handleMarkAllRead,startIcon:/*#__PURE__*/_jsx(DoneAllIcon,{}),children:\"Mark all as read\"})})]})]});};export default NotificationMenu;","map":{"version":3,"names":["React","Menu","MenuItem","Typography","Box","Divider","Button","IconButton","ListItemIcon","ListItemText","useNavigate","DoneAllIcon","NotificationsIcon","HomeIcon","PersonAddIcon","AnnouncementIcon","useNotifications","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","NotificationMenu","_ref","anchorEl","open","onClose","notifications","markAsRead","markAllAsRead","navigate","handleNotificationClick","notification","_id","relatedTo","handleMarkAllRead","getNotificationIcon","type","fontSize","color","PaperProps","elevation","sx","maxHeight","width","overflow","mt","px","py","transformOrigin","horizontal","vertical","anchorOrigin","children","display","justifyContent","alignItems","variant","size","onClick","title","length","p","textAlign","mb","map","className","bgcolor","read","borderLeft","borderColor","primary","message","secondary","Date","createdAt","toLocaleString","primaryTypographyProps","fontWeight","secondaryTypographyProps","startIcon"],"sources":["/Users/mikeb/familycabin/client/src/components/notifications/NotificationMenu.js"],"sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport { \n  Menu, \n  MenuItem, \n  Typography, \n  Box, \n  Divider, \n  Button,\n  IconButton,\n  ListItemIcon,\n  ListItemText\n} from '@mui/material';\nimport { useNavigate } from 'react-router-dom';\nimport DoneAllIcon from '@mui/icons-material/DoneAll';\nimport NotificationsIcon from '@mui/icons-material/Notifications';\nimport HomeIcon from '@mui/icons-material/Home';\nimport PersonAddIcon from '@mui/icons-material/PersonAdd';\nimport AnnouncementIcon from '@mui/icons-material/Announcement';\n\nimport { useNotifications } from '../../context/NotificationContext';\n\nconst NotificationMenu = ({ anchorEl, open, onClose }) => {\n  const { notifications, markAsRead, markAllAsRead } = useNotifications();\n  const navigate = useNavigate();\n  \n  const handleNotificationClick = (notification) => {\n    markAsRead(notification._id);\n    \n    // Navigate based on notification type\n    if (notification.relatedTo) {\n      navigate(`/cabins/${notification.relatedTo}`);\n    }\n    \n    onClose();\n  };\n  \n  const handleMarkAllRead = () => {\n    markAllAsRead();\n    onClose();\n  };\n  \n  // Get icon based on notification type\n  const getNotificationIcon = (type) => {\n    switch (type) {\n      case 'INVITE':\n        return <PersonAddIcon fontSize=\"small\" color=\"primary\" />;\n      case 'APPROVAL':\n        return <HomeIcon fontSize=\"small\" color=\"success\" />;\n      case 'SYSTEM':\n        return <AnnouncementIcon fontSize=\"small\" color=\"info\" />;\n      default:\n        return <NotificationsIcon fontSize=\"small\" />;\n    }\n  };\n  \n  return (\n    <Menu\n      anchorEl={anchorEl}\n      open={open}\n      onClose={onClose}\n      PaperProps={{\n        elevation: 3,\n        sx: {\n          maxHeight: 400,\n          width: 360,\n          overflow: 'auto',\n          mt: 1.5,\n          '& .MuiMenuItem-root': {\n            px: 2,\n            py: 1.5,\n          },\n        },\n      }}\n      transformOrigin={{ horizontal: 'right', vertical: 'top' }}\n      anchorOrigin={{ horizontal: 'right', vertical: 'bottom' }}\n    >\n      <Box sx={{ px: 2, py: 1.5, display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\n        <Typography variant=\"h6\">Notifications</Typography>\n        <IconButton size=\"small\" onClick={handleMarkAllRead} title=\"Mark all as read\">\n          <DoneAllIcon fontSize=\"small\" />\n        </IconButton>\n      </Box>\n      \n      <Divider />\n      \n      {notifications.length === 0 ? (\n        <Box sx={{ p: 2, textAlign: 'center' }}>\n          <NotificationsIcon sx={{ fontSize: 40, color: 'text.secondary', mb: 1 }} />\n          <Typography variant=\"body2\" color=\"text.secondary\">\n            No notifications yet\n          </Typography>\n        </Box>\n      ) : (\n        <>\n          {notifications.map((notification) => (\n            <MenuItem \n              key={notification._id} \n              onClick={() => handleNotificationClick(notification)}\n              className=\"notification-item\"\n              sx={{\n                bgcolor: notification.read ? 'transparent' : 'action.hover',\n                borderLeft: notification.read ? 'none' : '4px solid',\n                borderColor: 'primary.main',\n              }}\n            >\n              <ListItemIcon>\n                {getNotificationIcon(notification.type)}\n              </ListItemIcon>\n              <ListItemText \n                primary={notification.message}\n                secondary={new Date(notification.createdAt).toLocaleString()}\n                primaryTypographyProps={{\n                  variant: 'body2',\n                  fontWeight: notification.read ? 'normal' : 'bold',\n                }}\n                secondaryTypographyProps={{\n                  variant: 'caption',\n                }}\n              />\n            </MenuItem>\n          ))}\n          \n          <Divider />\n          \n          <Box sx={{ p: 1, display: 'flex', justifyContent: 'center' }}>\n            <Button\n              size=\"small\"\n              onClick={handleMarkAllRead}\n              startIcon={<DoneAllIcon />}\n            >\n              Mark all as read\n            </Button>\n          </Box>\n        </>\n      )}\n    </Menu>\n  );\n};\n\nNotificationMenu.propTypes = {\n  anchorEl: PropTypes.object,\n  open: PropTypes.bool.isRequired,\n  onClose: PropTypes.func.isRequired,\n};\n\nexport default NotificationMenu;\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CAEzB,OACEC,IAAI,CACJC,QAAQ,CACRC,UAAU,CACVC,GAAG,CACHC,OAAO,CACPC,MAAM,CACNC,UAAU,CACVC,YAAY,CACZC,YAAY,KACP,eAAe,CACtB,OAASC,WAAW,KAAQ,kBAAkB,CAC9C,MAAO,CAAAC,WAAW,KAAM,6BAA6B,CACrD,MAAO,CAAAC,iBAAiB,KAAM,mCAAmC,CACjE,MAAO,CAAAC,QAAQ,KAAM,0BAA0B,CAC/C,MAAO,CAAAC,aAAa,KAAM,+BAA+B,CACzD,MAAO,CAAAC,gBAAgB,KAAM,kCAAkC,CAE/D,OAASC,gBAAgB,KAAQ,mCAAmC,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,CAAAC,QAAA,IAAAC,SAAA,yBAErE,KAAM,CAAAC,gBAAgB,CAAGC,IAAA,EAAiC,IAAhC,CAAEC,QAAQ,CAAEC,IAAI,CAAEC,OAAQ,CAAC,CAAAH,IAAA,CACnD,KAAM,CAAEI,aAAa,CAAEC,UAAU,CAAEC,aAAc,CAAC,CAAGd,gBAAgB,CAAC,CAAC,CACvE,KAAM,CAAAe,QAAQ,CAAGrB,WAAW,CAAC,CAAC,CAE9B,KAAM,CAAAsB,uBAAuB,CAAIC,YAAY,EAAK,CAChDJ,UAAU,CAACI,YAAY,CAACC,GAAG,CAAC,CAE5B;AACA,GAAID,YAAY,CAACE,SAAS,CAAE,CAC1BJ,QAAQ,CAAC,WAAWE,YAAY,CAACE,SAAS,EAAE,CAAC,CAC/C,CAEAR,OAAO,CAAC,CAAC,CACX,CAAC,CAED,KAAM,CAAAS,iBAAiB,CAAGA,CAAA,GAAM,CAC9BN,aAAa,CAAC,CAAC,CACfH,OAAO,CAAC,CAAC,CACX,CAAC,CAED;AACA,KAAM,CAAAU,mBAAmB,CAAIC,IAAI,EAAK,CACpC,OAAQA,IAAI,EACV,IAAK,QAAQ,CACX,mBAAOpB,IAAA,CAACJ,aAAa,EAACyB,QAAQ,CAAC,OAAO,CAACC,KAAK,CAAC,SAAS,CAAE,CAAC,CAC3D,IAAK,UAAU,CACb,mBAAOtB,IAAA,CAACL,QAAQ,EAAC0B,QAAQ,CAAC,OAAO,CAACC,KAAK,CAAC,SAAS,CAAE,CAAC,CACtD,IAAK,QAAQ,CACX,mBAAOtB,IAAA,CAACH,gBAAgB,EAACwB,QAAQ,CAAC,OAAO,CAACC,KAAK,CAAC,MAAM,CAAE,CAAC,CAC3D,QACE,mBAAOtB,IAAA,CAACN,iBAAiB,EAAC2B,QAAQ,CAAC,OAAO,CAAE,CAAC,CACjD,CACF,CAAC,CAED,mBACEnB,KAAA,CAACnB,IAAI,EACHwB,QAAQ,CAAEA,QAAS,CACnBC,IAAI,CAAEA,IAAK,CACXC,OAAO,CAAEA,OAAQ,CACjBc,UAAU,CAAE,CACVC,SAAS,CAAE,CAAC,CACZC,EAAE,CAAE,CACFC,SAAS,CAAE,GAAG,CACdC,KAAK,CAAE,GAAG,CACVC,QAAQ,CAAE,MAAM,CAChBC,EAAE,CAAE,GAAG,CACP,qBAAqB,CAAE,CACrBC,EAAE,CAAE,CAAC,CACLC,EAAE,CAAE,GACN,CACF,CACF,CAAE,CACFC,eAAe,CAAE,CAAEC,UAAU,CAAE,OAAO,CAAEC,QAAQ,CAAE,KAAM,CAAE,CAC1DC,YAAY,CAAE,CAAEF,UAAU,CAAE,OAAO,CAAEC,QAAQ,CAAE,QAAS,CAAE,CAAAE,QAAA,eAE1DlC,KAAA,CAAChB,GAAG,EAACuC,EAAE,CAAE,CAAEK,EAAE,CAAE,CAAC,CAAEC,EAAE,CAAE,GAAG,CAAEM,OAAO,CAAE,MAAM,CAAEC,cAAc,CAAE,eAAe,CAAEC,UAAU,CAAE,QAAS,CAAE,CAAAH,QAAA,eAClGpC,IAAA,CAACf,UAAU,EAACuD,OAAO,CAAC,IAAI,CAAAJ,QAAA,CAAC,eAAa,CAAY,CAAC,cACnDpC,IAAA,CAACX,UAAU,EAACoD,IAAI,CAAC,OAAO,CAACC,OAAO,CAAExB,iBAAkB,CAACyB,KAAK,CAAC,kBAAkB,CAAAP,QAAA,cAC3EpC,IAAA,CAACP,WAAW,EAAC4B,QAAQ,CAAC,OAAO,CAAE,CAAC,CACtB,CAAC,EACV,CAAC,cAENrB,IAAA,CAACb,OAAO,GAAE,CAAC,CAEVuB,aAAa,CAACkC,MAAM,GAAK,CAAC,cACzB1C,KAAA,CAAChB,GAAG,EAACuC,EAAE,CAAE,CAAEoB,CAAC,CAAE,CAAC,CAAEC,SAAS,CAAE,QAAS,CAAE,CAAAV,QAAA,eACrCpC,IAAA,CAACN,iBAAiB,EAAC+B,EAAE,CAAE,CAAEJ,QAAQ,CAAE,EAAE,CAAEC,KAAK,CAAE,gBAAgB,CAAEyB,EAAE,CAAE,CAAE,CAAE,CAAE,CAAC,cAC3E/C,IAAA,CAACf,UAAU,EAACuD,OAAO,CAAC,OAAO,CAAClB,KAAK,CAAC,gBAAgB,CAAAc,QAAA,CAAC,sBAEnD,CAAY,CAAC,EACV,CAAC,cAENlC,KAAA,CAAAE,SAAA,EAAAgC,QAAA,EACG1B,aAAa,CAACsC,GAAG,CAAEjC,YAAY,eAC9Bb,KAAA,CAAClB,QAAQ,EAEP0D,OAAO,CAAEA,CAAA,GAAM5B,uBAAuB,CAACC,YAAY,CAAE,CACrDkC,SAAS,CAAC,mBAAmB,CAC7BxB,EAAE,CAAE,CACFyB,OAAO,CAAEnC,YAAY,CAACoC,IAAI,CAAG,aAAa,CAAG,cAAc,CAC3DC,UAAU,CAAErC,YAAY,CAACoC,IAAI,CAAG,MAAM,CAAG,WAAW,CACpDE,WAAW,CAAE,cACf,CAAE,CAAAjB,QAAA,eAEFpC,IAAA,CAACV,YAAY,EAAA8C,QAAA,CACVjB,mBAAmB,CAACJ,YAAY,CAACK,IAAI,CAAC,CAC3B,CAAC,cACfpB,IAAA,CAACT,YAAY,EACX+D,OAAO,CAAEvC,YAAY,CAACwC,OAAQ,CAC9BC,SAAS,CAAE,GAAI,CAAAC,IAAI,CAAC1C,YAAY,CAAC2C,SAAS,CAAC,CAACC,cAAc,CAAC,CAAE,CAC7DC,sBAAsB,CAAE,CACtBpB,OAAO,CAAE,OAAO,CAChBqB,UAAU,CAAE9C,YAAY,CAACoC,IAAI,CAAG,QAAQ,CAAG,MAC7C,CAAE,CACFW,wBAAwB,CAAE,CACxBtB,OAAO,CAAE,SACX,CAAE,CACH,CAAC,GAtBGzB,YAAY,CAACC,GAuBV,CACX,CAAC,cAEFhB,IAAA,CAACb,OAAO,GAAE,CAAC,cAEXa,IAAA,CAACd,GAAG,EAACuC,EAAE,CAAE,CAAEoB,CAAC,CAAE,CAAC,CAAER,OAAO,CAAE,MAAM,CAAEC,cAAc,CAAE,QAAS,CAAE,CAAAF,QAAA,cAC3DpC,IAAA,CAACZ,MAAM,EACLqD,IAAI,CAAC,OAAO,CACZC,OAAO,CAAExB,iBAAkB,CAC3B6C,SAAS,cAAE/D,IAAA,CAACP,WAAW,GAAE,CAAE,CAAA2C,QAAA,CAC5B,kBAED,CAAQ,CAAC,CACN,CAAC,EACN,CACH,EACG,CAAC,CAEX,CAAC,CAQD,cAAe,CAAA/B,gBAAgB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}