{"ast":null,"code":"import{ApolloClient,InMemoryCache,createHttpLink}from'@apollo/client';import{setContext}from'@apollo/client/link/context';// Create an http link\nconst httpLink=createHttpLink({uri:'/graphql'});// Auth link middleware to add token to requests\nconst authLink=setContext((_,_ref)=>{let{headers}=_ref;// Get the authentication token from local storage if it exists\nconst token=localStorage.getItem('auth_token');// Return the headers to the context so httpLink can read them\nreturn{headers:{...headers,authorization:token?`Bearer ${token}`:''}};});// Create Apollo Client instance\nconst client=new ApolloClient({link:authLink.concat(httpLink),cache:new InMemoryCache(),defaultOptions:{watchQuery:{fetchPolicy:'cache-and-network'}}});export default client;","map":{"version":3,"names":["ApolloClient","InMemoryCache","createHttpLink","setContext","httpLink","uri","authLink","_","_ref","headers","token","localStorage","getItem","authorization","client","link","concat","cache","defaultOptions","watchQuery","fetchPolicy"],"sources":["/Users/mikeb/familycabin/client/src/graphql/client.js"],"sourcesContent":["import { ApolloClient, InMemoryCache, createHttpLink } from '@apollo/client';\nimport { setContext } from '@apollo/client/link/context';\n\n// Create an http link\nconst httpLink = createHttpLink({\n  uri: '/graphql',\n});\n\n// Auth link middleware to add token to requests\nconst authLink = setContext((_, { headers }) => {\n  // Get the authentication token from local storage if it exists\n  const token = localStorage.getItem('auth_token');\n  \n  // Return the headers to the context so httpLink can read them\n  return {\n    headers: {\n      ...headers,\n      authorization: token ? `Bearer ${token}` : '',\n    }\n  };\n});\n\n// Create Apollo Client instance\nconst client = new ApolloClient({\n  link: authLink.concat(httpLink),\n  cache: new InMemoryCache(),\n  defaultOptions: {\n    watchQuery: {\n      fetchPolicy: 'cache-and-network',\n    },\n  },\n});\n\nexport default client;\n"],"mappings":"AAAA,OAASA,YAAY,CAAEC,aAAa,CAAEC,cAAc,KAAQ,gBAAgB,CAC5E,OAASC,UAAU,KAAQ,6BAA6B,CAExD;AACA,KAAM,CAAAC,QAAQ,CAAGF,cAAc,CAAC,CAC9BG,GAAG,CAAE,UACP,CAAC,CAAC,CAEF;AACA,KAAM,CAAAC,QAAQ,CAAGH,UAAU,CAAC,CAACI,CAAC,CAAAC,IAAA,GAAkB,IAAhB,CAAEC,OAAQ,CAAC,CAAAD,IAAA,CACzC;AACA,KAAM,CAAAE,KAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,YAAY,CAAC,CAEhD;AACA,MAAO,CACLH,OAAO,CAAE,CACP,GAAGA,OAAO,CACVI,aAAa,CAAEH,KAAK,CAAG,UAAUA,KAAK,EAAE,CAAG,EAC7C,CACF,CAAC,CACH,CAAC,CAAC,CAEF;AACA,KAAM,CAAAI,MAAM,CAAG,GAAI,CAAAd,YAAY,CAAC,CAC9Be,IAAI,CAAET,QAAQ,CAACU,MAAM,CAACZ,QAAQ,CAAC,CAC/Ba,KAAK,CAAE,GAAI,CAAAhB,aAAa,CAAC,CAAC,CAC1BiB,cAAc,CAAE,CACdC,UAAU,CAAE,CACVC,WAAW,CAAE,mBACf,CACF,CACF,CAAC,CAAC,CAEF,cAAe,CAAAN,MAAM","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}