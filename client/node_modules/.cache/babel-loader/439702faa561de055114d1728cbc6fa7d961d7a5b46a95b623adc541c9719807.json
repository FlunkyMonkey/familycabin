{"ast":null,"code":"import React,{useEffect}from'react';import{Routes,Route,Navigate}from'react-router-dom';import{Box,CssBaseline}from'@mui/material';import{useAuth}from'./context/AuthContext';// Layout components\nimport MainLayout from'./components/layouts/MainLayout';import AuthLayout from'./components/layouts/AuthLayout';// Pages\nimport Login from'./pages/Login';import Register from'./pages/Register';import Dashboard from'./pages/Dashboard';import CabinDirectory from'./pages/CabinDirectory';import CabinDetail from'./pages/CabinDetail';import CreateCabin from'./pages/CreateCabin';import Profile from'./pages/Profile';import NotFound from'./pages/NotFound';import AdminDashboard from'./pages/AdminDashboard';// Protected route component\nimport{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const ProtectedRoute=_ref=>{let{children}=_ref;const{user,loading}=useAuth();// Show loading state while checking authentication\nif(loading){return/*#__PURE__*/_jsx(Box,{sx:{display:'flex',justifyContent:'center',alignItems:'center',height:'100vh'},children:\"Loading...\"});}// Redirect to login if not authenticated\nif(!user){return/*#__PURE__*/_jsx(Navigate,{to:\"/login\",replace:true});}return children;};// Admin route component\nconst AdminRoute=_ref2=>{let{children}=_ref2;const{user,loading,isGlobalAdmin}=useAuth();// Show loading state while checking authentication\nif(loading){return/*#__PURE__*/_jsx(Box,{sx:{display:'flex',justifyContent:'center',alignItems:'center',height:'100vh'},children:\"Loading...\"});}// Redirect to dashboard if not admin\nif(!user||!isGlobalAdmin()){return/*#__PURE__*/_jsx(Navigate,{to:\"/dashboard\",replace:true});}return children;};function App(){const{user}=useAuth();return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(CssBaseline,{}),/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsxs(Route,{element:/*#__PURE__*/_jsx(AuthLayout,{}),children:[/*#__PURE__*/_jsx(Route,{path:\"/login\",element:!user?/*#__PURE__*/_jsx(Login,{}):/*#__PURE__*/_jsx(Navigate,{to:\"/dashboard\",replace:true})}),/*#__PURE__*/_jsx(Route,{path:\"/register\",element:!user?/*#__PURE__*/_jsx(Register,{}):/*#__PURE__*/_jsx(Navigate,{to:\"/dashboard\",replace:true})})]}),/*#__PURE__*/_jsxs(Route,{element:/*#__PURE__*/_jsx(MainLayout,{}),children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(Navigate,{to:user?\"/dashboard\":\"/login\",replace:true})}),/*#__PURE__*/_jsx(Route,{path:\"/dashboard\",element:/*#__PURE__*/_jsx(ProtectedRoute,{children:/*#__PURE__*/_jsx(Dashboard,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/cabins\",element:/*#__PURE__*/_jsx(ProtectedRoute,{children:/*#__PURE__*/_jsx(CabinDirectory,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/cabins/:id\",element:/*#__PURE__*/_jsx(ProtectedRoute,{children:/*#__PURE__*/_jsx(CabinDetail,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/cabins/create\",element:/*#__PURE__*/_jsx(ProtectedRoute,{children:/*#__PURE__*/_jsx(CreateCabin,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/profile\",element:/*#__PURE__*/_jsx(ProtectedRoute,{children:/*#__PURE__*/_jsx(Profile,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/admin\",element:/*#__PURE__*/_jsx(AdminRoute,{children:/*#__PURE__*/_jsx(AdminDashboard,{})})})]}),/*#__PURE__*/_jsx(Route,{path:\"*\",element:/*#__PURE__*/_jsx(NotFound,{})})]})]});}export default App;","map":{"version":3,"names":["React","useEffect","Routes","Route","Navigate","Box","CssBaseline","useAuth","MainLayout","AuthLayout","Login","Register","Dashboard","CabinDirectory","CabinDetail","CreateCabin","Profile","NotFound","AdminDashboard","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ProtectedRoute","_ref","children","user","loading","sx","display","justifyContent","alignItems","height","to","replace","AdminRoute","_ref2","isGlobalAdmin","App","element","path"],"sources":["/Users/mikeb/familycabin/client/src/App.js"],"sourcesContent":["import React, { useEffect } from 'react';\nimport { Routes, Route, Navigate } from 'react-router-dom';\nimport { Box, CssBaseline } from '@mui/material';\nimport { useAuth } from './context/AuthContext';\n\n// Layout components\nimport MainLayout from './components/layouts/MainLayout';\nimport AuthLayout from './components/layouts/AuthLayout';\n\n// Pages\nimport Login from './pages/Login';\nimport Register from './pages/Register';\nimport Dashboard from './pages/Dashboard';\nimport CabinDirectory from './pages/CabinDirectory';\nimport CabinDetail from './pages/CabinDetail';\nimport CreateCabin from './pages/CreateCabin';\nimport Profile from './pages/Profile';\nimport NotFound from './pages/NotFound';\nimport AdminDashboard from './pages/AdminDashboard';\n\n// Protected route component\nconst ProtectedRoute = ({ children }) => {\n  const { user, loading } = useAuth();\n  \n  // Show loading state while checking authentication\n  if (loading) {\n    return <Box sx={{ display: 'flex', justifyContent: 'center', alignItems: 'center', height: '100vh' }}>Loading...</Box>;\n  }\n  \n  // Redirect to login if not authenticated\n  if (!user) {\n    return <Navigate to=\"/login\" replace />;\n  }\n  \n  return children;\n};\n\n// Admin route component\nconst AdminRoute = ({ children }) => {\n  const { user, loading, isGlobalAdmin } = useAuth();\n  \n  // Show loading state while checking authentication\n  if (loading) {\n    return <Box sx={{ display: 'flex', justifyContent: 'center', alignItems: 'center', height: '100vh' }}>Loading...</Box>;\n  }\n  \n  // Redirect to dashboard if not admin\n  if (!user || !isGlobalAdmin()) {\n    return <Navigate to=\"/dashboard\" replace />;\n  }\n  \n  return children;\n};\n\nfunction App() {\n  const { user } = useAuth();\n  \n  return (\n    <>\n      <CssBaseline />\n      <Routes>\n        {/* Auth routes */}\n        <Route element={<AuthLayout />}>\n          <Route path=\"/login\" element={!user ? <Login /> : <Navigate to=\"/dashboard\" replace />} />\n          <Route path=\"/register\" element={!user ? <Register /> : <Navigate to=\"/dashboard\" replace />} />\n        </Route>\n        \n        {/* Protected routes */}\n        <Route element={<MainLayout />}>\n          <Route path=\"/\" element={<Navigate to={user ? \"/dashboard\" : \"/login\"} replace />} />\n          \n          <Route path=\"/dashboard\" element={\n            <ProtectedRoute>\n              <Dashboard />\n            </ProtectedRoute>\n          } />\n          \n          <Route path=\"/cabins\" element={\n            <ProtectedRoute>\n              <CabinDirectory />\n            </ProtectedRoute>\n          } />\n          \n          <Route path=\"/cabins/:id\" element={\n            <ProtectedRoute>\n              <CabinDetail />\n            </ProtectedRoute>\n          } />\n          \n          <Route path=\"/cabins/create\" element={\n            <ProtectedRoute>\n              <CreateCabin />\n            </ProtectedRoute>\n          } />\n          \n          <Route path=\"/profile\" element={\n            <ProtectedRoute>\n              <Profile />\n            </ProtectedRoute>\n          } />\n          \n          <Route path=\"/admin\" element={\n            <AdminRoute>\n              <AdminDashboard />\n            </AdminRoute>\n          } />\n        </Route>\n        \n        {/* 404 route */}\n        <Route path=\"*\" element={<NotFound />} />\n      </Routes>\n    </>\n  );\n}\n\nexport default App;\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,KAAQ,OAAO,CACxC,OAASC,MAAM,CAAEC,KAAK,CAAEC,QAAQ,KAAQ,kBAAkB,CAC1D,OAASC,GAAG,CAAEC,WAAW,KAAQ,eAAe,CAChD,OAASC,OAAO,KAAQ,uBAAuB,CAE/C;AACA,MAAO,CAAAC,UAAU,KAAM,iCAAiC,CACxD,MAAO,CAAAC,UAAU,KAAM,iCAAiC,CAExD;AACA,MAAO,CAAAC,KAAK,KAAM,eAAe,CACjC,MAAO,CAAAC,QAAQ,KAAM,kBAAkB,CACvC,MAAO,CAAAC,SAAS,KAAM,mBAAmB,CACzC,MAAO,CAAAC,cAAc,KAAM,wBAAwB,CACnD,MAAO,CAAAC,WAAW,KAAM,qBAAqB,CAC7C,MAAO,CAAAC,WAAW,KAAM,qBAAqB,CAC7C,MAAO,CAAAC,OAAO,KAAM,iBAAiB,CACrC,MAAO,CAAAC,QAAQ,KAAM,kBAAkB,CACvC,MAAO,CAAAC,cAAc,KAAM,wBAAwB,CAEnD;AAAA,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,CAAAC,QAAA,IAAAC,SAAA,yBACA,KAAM,CAAAC,cAAc,CAAGC,IAAA,EAAkB,IAAjB,CAAEC,QAAS,CAAC,CAAAD,IAAA,CAClC,KAAM,CAAEE,IAAI,CAAEC,OAAQ,CAAC,CAAGtB,OAAO,CAAC,CAAC,CAEnC;AACA,GAAIsB,OAAO,CAAE,CACX,mBAAOT,IAAA,CAACf,GAAG,EAACyB,EAAE,CAAE,CAAEC,OAAO,CAAE,MAAM,CAAEC,cAAc,CAAE,QAAQ,CAAEC,UAAU,CAAE,QAAQ,CAAEC,MAAM,CAAE,OAAQ,CAAE,CAAAP,QAAA,CAAC,YAAU,CAAK,CAAC,CACxH,CAEA;AACA,GAAI,CAACC,IAAI,CAAE,CACT,mBAAOR,IAAA,CAAChB,QAAQ,EAAC+B,EAAE,CAAC,QAAQ,CAACC,OAAO,MAAE,CAAC,CACzC,CAEA,MAAO,CAAAT,QAAQ,CACjB,CAAC,CAED;AACA,KAAM,CAAAU,UAAU,CAAGC,KAAA,EAAkB,IAAjB,CAAEX,QAAS,CAAC,CAAAW,KAAA,CAC9B,KAAM,CAAEV,IAAI,CAAEC,OAAO,CAAEU,aAAc,CAAC,CAAGhC,OAAO,CAAC,CAAC,CAElD;AACA,GAAIsB,OAAO,CAAE,CACX,mBAAOT,IAAA,CAACf,GAAG,EAACyB,EAAE,CAAE,CAAEC,OAAO,CAAE,MAAM,CAAEC,cAAc,CAAE,QAAQ,CAAEC,UAAU,CAAE,QAAQ,CAAEC,MAAM,CAAE,OAAQ,CAAE,CAAAP,QAAA,CAAC,YAAU,CAAK,CAAC,CACxH,CAEA;AACA,GAAI,CAACC,IAAI,EAAI,CAACW,aAAa,CAAC,CAAC,CAAE,CAC7B,mBAAOnB,IAAA,CAAChB,QAAQ,EAAC+B,EAAE,CAAC,YAAY,CAACC,OAAO,MAAE,CAAC,CAC7C,CAEA,MAAO,CAAAT,QAAQ,CACjB,CAAC,CAED,QAAS,CAAAa,GAAGA,CAAA,CAAG,CACb,KAAM,CAAEZ,IAAK,CAAC,CAAGrB,OAAO,CAAC,CAAC,CAE1B,mBACEe,KAAA,CAAAE,SAAA,EAAAG,QAAA,eACEP,IAAA,CAACd,WAAW,GAAE,CAAC,cACfgB,KAAA,CAACpB,MAAM,EAAAyB,QAAA,eAELL,KAAA,CAACnB,KAAK,EAACsC,OAAO,cAAErB,IAAA,CAACX,UAAU,GAAE,CAAE,CAAAkB,QAAA,eAC7BP,IAAA,CAACjB,KAAK,EAACuC,IAAI,CAAC,QAAQ,CAACD,OAAO,CAAE,CAACb,IAAI,cAAGR,IAAA,CAACV,KAAK,GAAE,CAAC,cAAGU,IAAA,CAAChB,QAAQ,EAAC+B,EAAE,CAAC,YAAY,CAACC,OAAO,MAAE,CAAE,CAAE,CAAC,cAC1FhB,IAAA,CAACjB,KAAK,EAACuC,IAAI,CAAC,WAAW,CAACD,OAAO,CAAE,CAACb,IAAI,cAAGR,IAAA,CAACT,QAAQ,GAAE,CAAC,cAAGS,IAAA,CAAChB,QAAQ,EAAC+B,EAAE,CAAC,YAAY,CAACC,OAAO,MAAE,CAAE,CAAE,CAAC,EAC3F,CAAC,cAGRd,KAAA,CAACnB,KAAK,EAACsC,OAAO,cAAErB,IAAA,CAACZ,UAAU,GAAE,CAAE,CAAAmB,QAAA,eAC7BP,IAAA,CAACjB,KAAK,EAACuC,IAAI,CAAC,GAAG,CAACD,OAAO,cAAErB,IAAA,CAAChB,QAAQ,EAAC+B,EAAE,CAAEP,IAAI,CAAG,YAAY,CAAG,QAAS,CAACQ,OAAO,MAAE,CAAE,CAAE,CAAC,cAErFhB,IAAA,CAACjB,KAAK,EAACuC,IAAI,CAAC,YAAY,CAACD,OAAO,cAC9BrB,IAAA,CAACK,cAAc,EAAAE,QAAA,cACbP,IAAA,CAACR,SAAS,GAAE,CAAC,CACC,CACjB,CAAE,CAAC,cAEJQ,IAAA,CAACjB,KAAK,EAACuC,IAAI,CAAC,SAAS,CAACD,OAAO,cAC3BrB,IAAA,CAACK,cAAc,EAAAE,QAAA,cACbP,IAAA,CAACP,cAAc,GAAE,CAAC,CACJ,CACjB,CAAE,CAAC,cAEJO,IAAA,CAACjB,KAAK,EAACuC,IAAI,CAAC,aAAa,CAACD,OAAO,cAC/BrB,IAAA,CAACK,cAAc,EAAAE,QAAA,cACbP,IAAA,CAACN,WAAW,GAAE,CAAC,CACD,CACjB,CAAE,CAAC,cAEJM,IAAA,CAACjB,KAAK,EAACuC,IAAI,CAAC,gBAAgB,CAACD,OAAO,cAClCrB,IAAA,CAACK,cAAc,EAAAE,QAAA,cACbP,IAAA,CAACL,WAAW,GAAE,CAAC,CACD,CACjB,CAAE,CAAC,cAEJK,IAAA,CAACjB,KAAK,EAACuC,IAAI,CAAC,UAAU,CAACD,OAAO,cAC5BrB,IAAA,CAACK,cAAc,EAAAE,QAAA,cACbP,IAAA,CAACJ,OAAO,GAAE,CAAC,CACG,CACjB,CAAE,CAAC,cAEJI,IAAA,CAACjB,KAAK,EAACuC,IAAI,CAAC,QAAQ,CAACD,OAAO,cAC1BrB,IAAA,CAACiB,UAAU,EAAAV,QAAA,cACTP,IAAA,CAACF,cAAc,GAAE,CAAC,CACR,CACb,CAAE,CAAC,EACC,CAAC,cAGRE,IAAA,CAACjB,KAAK,EAACuC,IAAI,CAAC,GAAG,CAACD,OAAO,cAAErB,IAAA,CAACH,QAAQ,GAAE,CAAE,CAAE,CAAC,EACnC,CAAC,EACT,CAAC,CAEP,CAEA,cAAe,CAAAuB,GAAG","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}